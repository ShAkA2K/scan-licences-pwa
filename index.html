<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scan Licences - PWA</title>
  </head>
  <body>
    <div id="root">
	  <style>
		.boot-splash{min-height:100vh;display:grid;place-items:center;background:linear-gradient(180deg,#2563eb,#1d4ed8);}
		.boot-card{background:#fff;border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.15);color:#111;max-width:640px}
		.boot-err{white-space:pre-wrap;background:#fef2f2;color:#991b1b;border-radius:8px;padding:8px;margin-top:8px}
	  </style>
	  <div class="boot-splash">
		<div class="boot-card">
		  <b>Chargement de l’application…</b>
		  <div id="boot-msg" class="boot-err" style="display:none"></div>
		  <noscript>
			<div class="boot-err">Activez JavaScript pour utiliser l’application.</div>
		  </noscript>
		</div>
	  </div>
	  <script>
		// Overlay diagnostic qui s’affiche si le bundle ne démarre pas
		(function () {
		  const show = (msg) => {
			const el = document.getElementById('boot-msg'); if (!el) return;
			el.style.display = 'block'; el.textContent = msg;
			console.error('[BOOT]', msg);
		  };
		  // Erreurs globales (avant React)
		  window.addEventListener('error', (e) => show('Erreur JS: ' + (e.message || e)));
		  window.addEventListener('unhandledrejection', (e) => show('Promise rejetée: ' + (e.reason || e)));
		  // Si au bout de 2s React n’a pas marqué __appBooted=true → alerte
		  setTimeout(() => {
			if (!window.__appBooted) {
			  show('Le bundle ne s’est pas exécuté. Essayez: /?clear-sw\nSi le problème persiste, vérifiez les variables Vercel (VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY).');
			}
		  }, 2000);
		})();
	  </script>
	</div>

    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
